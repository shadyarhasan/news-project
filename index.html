<!DOCTYPE html>
<html lang="ku">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>هەواڵی کوردستان</title>
<style>
  body { font-family: Arial; margin:0; padding:0; background:#fff; color:#000; transition: 0.3s; }
  .dark { background:#121212; color:#fff; }
  header { padding:1rem; text-align:center; background:#6200ea; color:#fff; font-size:1.5rem; }
  nav { position:fixed; bottom:0; width:100%; display:flex; background:#eee; border-top:1px solid #ccc; }
  nav button { flex:1; padding:1rem; font-size:1rem; border:none; background:none; cursor:pointer; position:relative; overflow:hidden; }
  nav button:active::after { content:""; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%); width:100%; height:100%; background:rgba(0,0,0,0.2); border-radius:50%; animation:ripple 0.6s; }
  @keyframes ripple { 0% { transform:translate(-50%,-50%) scale(0); opacity:1; } 100% { transform:translate(-50%,-50%) scale(4); opacity:0; } }
  main { padding:1rem; margin-bottom:60px; }
  .news { border-bottom:1px solid #ccc; padding:0.5rem 0; cursor:pointer; display:flex; gap:1rem; }
  .news img { width:80px; height:60px; object-fit:cover; }
  #detail { display:none; }
  #detail img { width:100%; max-height:300px; object-fit:cover; margin-bottom:1rem; }
  .settings { display:none; }
  button.back { margin:0.5rem 0; padding:0.5rem 1rem; cursor:pointer; }
  .toggle { margin-top:1rem; cursor:pointer; }
</style>
</head>
<body>
<header>هەواڵی کوردستان</header>
<main id="main"></main>

<div id="detail">
  <button class="back">Back</button>
  <h2 id="detail-title"></h2>
  <img id="detail-img" src="" alt="">
  <p id="detail-desc"></p>
</div>

<div class="settings" id="settings">
  <button class="back">Back</button>
  <h2>دەربارەی سایت</h2>
  <p>ئەم سایتە دروستکراوە بۆ نیشاندانی هەواڵی کوردستان. بەشەکان و هەواڵەکان بە زمانی کوردی.</p>
  <h3>دەربارەی گەشەپێدەر</h3>
  <p>شادیار</p>
  <div class="toggle"><button id="darkMode">Light/Dark Mode</button></div>
</div>

<nav>
  <button data-channel="rudaw">Rudaw</button>
  <button data-channel="nrt">NRT</button>
  <button data-channel="gk">GK</button>
  <button data-channel="kurdistan24">K24</button>
  <button data-channel="basnews">BasNews</button>
  <button data-channel="xendan">Xendan</button>
  <button data-channel="waar">Waar</button>
  <button data-channel="peyam">Peyam</button>
  <button data-channel="knn">KNN</button>
  <button data-channel="settings">Settings</button>
</nav>

<script>
const main = document.getElementById('main');
const detail = document.getElementById('detail');
const settings = document.getElementById('settings');
const detailTitle = document.getElementById('detail-title');
const detailImg = document.getElementById('detail-img');
const detailDesc = document.getElementById('detail-desc');
const darkBtn = document.getElementById('darkMode');

const backBtns = document.querySelectorAll('.back');
backBtns.forEach(btn => btn.addEventListener('click', () => {
  main.style.display='block';
  detail.style.display='none';
  settings.style.display='none';
}));

let dark=false;
darkBtn.addEventListener('click', () => {
  dark = !dark;
  document.body.classList.toggle('dark', dark);
});

const loadNews = (channel)=>{
  if(channel==='settings'){ main.style.display='none'; settings.style.display='block'; detail.style.display='none'; return; }
  main.innerHTML='Loading...';
  main.style.display='block';
  settings.style.display='none';
  detail.style.display='none';
  fetch(`http://localhost:3000/api/${channel}`)
  .then(r=>r.json())
  .then(data=>{
    main.innerHTML='';
    data.forEach(n=>{
      const div = document.createElement('div');
      div.className='news';
      div.innerHTML=`<img src="${n.image||''}"><div><h3>${n.title}</h3><p>${n.description}</p></div>`;
      div.addEventListener('click', ()=>{
        detailTitle.textContent=n.title;
        detailImg.src=n.image||'';
        detailDesc.textContent=n.description;
        detail.style.display='block';
        main.style.display='none';
      });
      main.appendChild(div);
    });
  }).catch(err=>main.innerHTML='Error loading news');
};

document.querySelectorAll('nav button').forEach(btn=>{
  btn.addEventListener('click', ()=>loadNews(btn.dataset.channel));
});

// Load default
loadNews('rudaw');
</script>
</body>
</html>